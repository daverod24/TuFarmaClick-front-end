(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{gNU3:function(r,t,o){"use strict";o.r(t),o.d(t,"CategoriasModule",(function(){return f}));var e=o("ofXK"),a=o("tyNb"),i=o("PSD3"),n=o.n(i),s=o("fXoL"),c=o("NtuB"),b=o("3Pt+");const u=function(r){return["editarCategoria",r]};function d(r,t){if(1&r){const r=s.Xb();s.Wb(0,"tr"),s.Wb(1,"td"),s.uc(2),s.Vb(),s.Wb(3,"td"),s.uc(4),s.Vb(),s.Wb(5,"td"),s.Wb(6,"button",12),s.ec("click",(function(){s.qc(r);const o=t.$implicit;return s.gc().deleteCategoria(o._id)})),s.Sb(7,"i",13),s.Vb(),s.Wb(8,"button",14),s.Sb(9,"i",15),s.Vb(),s.Vb(),s.Vb()}if(2&r){const r=t.$implicit;s.Hb(2),s.vc(r._id),s.Hb(2),s.vc(r.categoria),s.Hb(4),s.kc("routerLink",s.nc(3,u,r._uid))}}let g=(()=>{class r{constructor(r,t){this.productosService=r,this.fb=t,this.page=1,this.catgorisDesdeCsvFormData=new FormData,this.miFormulario=this.fb.group({nombre:[""]}),this.miFormularioArchivo=this.fb.group({archivo:[,[]]})}ngOnInit(){this.listarCategorias()}listarCategorias(){this.productosService.getCategorias().subscribe(r=>{this.categorias=r.categorias})}deleteCategoria(r){n.a.fire({title:"\xbfEsta Seguro de borrar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Si, borrar!"}).then(t=>{t.isConfirmed&&(this.productosService.deleteCategoria(r).subscribe(r=>{this.actualizarCategorias()}),n.a.fire("Borrado!","La categoria se borro con \xe9xito.","success"))})}actualizarCategorias(){this.productosService.getCategorias().subscribe(r=>{this.categorias=r.categorias,console.log(r)})}agregarCategoria(){n.a.fire({title:"\xbfDesea guardar los cambios?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Guardar",denyButtonText:"No guardar"}).then(r=>{r.isConfirmed?this.productosService.createCategoria({nombre:this.miFormulario.value}).subscribe(r=>{console.log(r),r&&(n.a.fire("Categor\xeda guardada con exito!","","success"),this.miFormulario.reset())},r=>{console.log(r.error.msg),n.a.fire("Ha ocurrido un error: "+r.error.msg,"","error")}):r.isDenied&&n.a.fire("Producto no guardado","","info")})}insertarCategoriasDesdeCsv(){n.a.fire({title:"\xbfDesea guardar los cambios?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Guardar",denyButtonText:"No guardar"}).then(r=>{r.isConfirmed?(this.categoriasCsv&&this.catgorisDesdeCsvFormData.set("archivo",this.categoriasCsv[0]),this.productosService.subirCategoriaDesdeCsv(this.catgorisDesdeCsvFormData).subscribe(r=>{r.ok?(n.a.fire("Producto guardado con exito!","","success"),this.miFormulario.reset(),this.listarCategorias()):n.a.fire("Ha ocurrido un error: "+r.msg,"","error")},r=>{console.log(r.error.msg),n.a.fire("Ha ocurrido un error: "+r.error.msg,"","error")})):r.isDenied&&n.a.fire("Producto no guardado","","info")})}capturarFile(r){this.categoriasCsv=r.target.files}}return r.\u0275fac=function(t){return new(t||r)(s.Rb(c.a),s.Rb(b.b))},r.\u0275cmp=s.Lb({type:r,selectors:[["app-categorias"]],decls:30,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-4"],[1,"col-5","mb-3",3,"formGroup"],["type","text","formControlName","nombre","placeholder","Agregar Categor\xeda","aria-label","Example text with button addon","aria-describedby","button-addon1",1,"form-control"],["type","submit","id","button-addon1",1,"btn","btn-primary","boton","mt-2",3,"click"],["type","file","formControlName","archivo","aria-label","Example text with button addon","aria-describedby","button-addon1",1,"form-control",3,"change"],[1,"table","table-sm"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-danger","btn-sm","m-1",3,"click"],[1,"far","fa-trash-alt","icon"],["type","submit",1,"btn","btn-info","btn-sm",3,"routerLink"],[1,"fas","fa-user-edit","icon"]],template:function(r,t){1&r&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"h1"),s.uc(4,"Categor\xedas:"),s.Vb(),s.Vb(),s.Vb(),s.Wb(5,"div",1),s.Wb(6,"form",3),s.Wb(7,"div"),s.Sb(8,"input",4),s.Vb(),s.Wb(9,"div"),s.Wb(10,"button",5),s.ec("click",(function(){return t.agregarCategoria()})),s.uc(11," Agregar Categor\xedas "),s.Vb(),s.Vb(),s.Vb(),s.Wb(12,"form",3),s.Wb(13,"div"),s.Wb(14,"input",6),s.ec("change",(function(r){return t.capturarFile(r)})),s.Vb(),s.Vb(),s.Wb(15,"div"),s.Wb(16,"button",5),s.ec("click",(function(){return t.insertarCategoriasDesdeCsv()})),s.uc(17," Subir archivos "),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(18,"div",7),s.Wb(19,"table",8),s.Wb(20,"thead"),s.Wb(21,"tr"),s.Wb(22,"th",9),s.uc(23,"Id"),s.Vb(),s.Wb(24,"th",9),s.uc(25,"Categor\xeda"),s.Vb(),s.Sb(26,"th",9),s.Vb(),s.Vb(),s.Wb(27,"tbody"),s.tc(28,d,10,5,"tr",10),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Sb(29,"div",11)),2&r&&(s.Hb(6),s.kc("formGroup",t.miFormulario),s.Hb(6),s.kc("formGroup",t.miFormularioArchivo),s.Hb(16),s.kc("ngForOf",t.categorias))},directives:[b.m,b.f,b.d,b.a,b.e,b.c,e.j,a.c],styles:["*[_ngcontent-%COMP%]{color:#398adb}.boton[_ngcontent-%COMP%]{color:beige}"]}),r})();const l=[{path:"",component:g},{path:"agregarCategoria",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=s.Lb({type:r,selectors:[["app-agregar-categorias"]],decls:2,vars:0,template:function(r,t){1&r&&(s.Wb(0,"p"),s.uc(1,"agregar-categorias works!"),s.Vb())},styles:[""]}),r})()},{path:"editarCategoria/:_id",component:g}];let m=(()=>{class r{}return r.\u0275mod=s.Pb({type:r}),r.\u0275inj=s.Ob({factory:function(t){return new(t||r)},imports:[[a.f.forChild(l)],a.f]}),r})(),f=(()=>{class r{}return r.\u0275mod=s.Pb({type:r}),r.\u0275inj=s.Ob({factory:function(t){return new(t||r)},imports:[[e.b,m,b.h]]}),r})()}}]);